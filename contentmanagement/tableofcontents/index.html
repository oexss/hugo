<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Table of Contents - 目录 # https://gohugo.io/content-management/toc/ ​ Hugo可以自动解析Markdown内容并创建一个目录，您可以在模板中使用它。 ​ 以前，没有开箱即用的方法来指定要渲染TOC"><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://t.is-local.org/hugo/contentmanagement/tableofcontents/"><meta property="og:site_name" content="HUGO"><meta property="og:title" content="目录"><meta property="og:description" content="Table of Contents - 目录 # https://gohugo.io/content-management/toc/ ​ Hugo可以自动解析Markdown内容并创建一个目录，您可以在模板中使用它。 ​ 以前，没有开箱即用的方法来指定要渲染TOC"><meta property="og:locale" content="zh_cn"><meta property="og:type" content="article"><meta property="article:section" content="contentmanagement"><meta property="article:published_time" content="2023-05-18T17:03:08+08:00"><meta property="article:modified_time" content="2023-05-18T17:03:08+08:00"><title>目录 | HUGO</title>
<link rel=manifest href=/hugo/manifest.json><link rel=icon href=/hugo/favicon.png><link rel=canonical href=https://t.is-local.org/hugo/contentmanagement/tableofcontents/><link rel=stylesheet href=/hugo/book.min.309b7ed028807cdb68d8d61e26d609f48369c098dbf5e4d8c0dcf4cdf49feafc.css integrity="sha256-MJt+0CiAfNto2NYeJtYJ9INpwJjb9eTYwNz0zfSf6vw=" crossorigin=anonymous><script defer src=/hugo/fuse.min.js></script><script defer src=/hugo/zh-cn.search.min.a426f3a0e1e8951a39b1b352645e382bb08b14b3d53468b1f8b07b0d0928cfe6.js integrity="sha256-pCbzoOHolRo5sbNSZF44K7CLFLPVNGix+LB7DQkoz+Y=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/hugo/><span>HUGO</span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder aria-label maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><ul class=book-languages><li><input type=checkbox id=languages class=toggle>
<label for=languages class="flex justify-between"><a role=button class="flex align-center"><img src=/hugo/svg/translate.svg class=book-icon alt=Languages>
中文</a></label><ul><li><a href=https://t.is-local.org/hugo/en/>English</a></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/hugo/svg/menu.svg class=book-icon alt=Menu>
</label><strong>目录</strong>
<label for=toc-control><img src=/hugo/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#用法>用法</a></li><li><a href=#模板示例基本toc>模板示例：基本TOC</a></li><li><a href=#模板示例toc-partial>模板示例：TOC Partial</a></li><li><a href=#使用asciidoc>使用AsciiDoc</a></li><li><a href=#另请参阅>另请参阅</a></li></ul></nav></aside></header><article class="markdown book-article"><h1 id=table-of-contents---目录>Table of Contents - 目录
<a class=anchor href=#table-of-contents---%e7%9b%ae%e5%bd%95>#</a></h1><p><a href=https://gohugo.io/content-management/toc/>https://gohugo.io/content-management/toc/</a></p><p>​ Hugo可以自动解析Markdown内容并创建一个目录，您可以在模板中使用它。</p><p>​ 以前，没有开箱即用的方法来指定要渲染TOC的标题级别。<a href=https://github.com/gohugoio/hugo/issues/1778>请参见相关的GitHub讨论(#1778)</a>。因此，从<code>{{ .Content }}</code>中提取时，生成的<code>&lt;nav id="TableOfContents">&lt;ul>&lt;/ul>&lt;/nav></code>将从<code>&lt;h1></code>开始。</p><p>​ Hugo <a href=https://github.com/gohugoio/hugo/releases/tag/v0.60.0>v0.60.0</a>切换到了<a href=https://github.com/yuin/goldmark/>Goldmark</a>作为Markdown的默认库，该库具有改进和可配置的TOC实现。请看<a href=https://gohugo.io/getting-started/configuration-markup/#table-of-contents>如何为Goldmark渲染器配置TOC</a>。</p><h2 id=用法>用法
<a class=anchor href=#%e7%94%a8%e6%b3%95>#</a></h2><p>​ 以通常的标题方式创建您的Markdown。以下是一些示例内容：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-md data-lang=md><span style=display:flex><span><span style=color:#75715e>&lt;!-- Your 前置元数据 up here --&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>## Introduction
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>One morning, when Gregor Samsa woke from troubled dreams, he found himself transformed in his bed into a horrible vermin.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>## My Heading
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>He lay on his armour-like back, and if he lifted his head a little he could see his brown belly, slightly domed and divided by arches into stiff sections. The bedding was hardly able to cover it and seemed ready to slide off any moment.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>### My Subheading
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>A collection of textile samples lay spread out on the table - Samsa was a travelling salesman - and above it there hung a picture that he had recently cut out of an illustrated magazine and housed in a nice, gilded frame. It showed a lady fitted out with a fur hat and fur boa who sat upright, raising a heavy fur muff that covered the whole of her lower arm towards the viewer. Gregor then turned to look out the window at the dull weather. Drops
</span></span></code></pre></div><p>​ Hugo将从<code>##Introduction</code>、<code>##My Heading</code>和<code>###My Subheading</code>创建一个目录，然后将其存储在<a href=https://gohugo.io/variables/page/>页面变量</a><code>.TableOfContents</code>中。</p><p>​ 内置的<code>.TableOfContents</code>变量输出一个带有子<code>&lt;ul></code>元素的<code>&lt;nav id="TableOfContents"></code>，其子<code>&lt;li></code>元素以适当的HTML标题开头。请查看<a href=https://gohugo.io/getting-started/configuration-markup/#table-of-contents>可用设置</a>，以配置要在TOC中包含哪些标题级别。</p><h2 id=模板示例基本toc>模板示例：基本TOC
<a class=anchor href=#%e6%a8%a1%e6%9d%bf%e7%a4%ba%e4%be%8b%e5%9f%ba%e6%9c%actoc>#</a></h2><p>​ 以下是一个非常基本的<a href=https://gohugo.io/templates/single-page-templates/>单页面模板</a>示例：</p><p>layout/_default/single.html</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go-html-template data-lang=go-html-template><span style=display:flex><span><span style=color:#75715e>{{</span> <span style=color:#66d9ef>define</span> <span style=color:#e6db74>&#34;main&#34;</span> <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>main</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>article</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>header</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>h1</span>&gt;<span style=color:#75715e>{{</span> <span style=color:#a6e22e>.Title</span> <span style=color:#75715e>}}</span>&lt;/<span style=color:#f92672>h1</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>header</span>&gt;
</span></span><span style=display:flex><span>        <span style=color:#75715e>{{</span> <span style=color:#a6e22e>.Content</span> <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>article</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>aside</span>&gt;
</span></span><span style=display:flex><span>        <span style=color:#75715e>{{</span> <span style=color:#a6e22e>.TableOfContents</span> <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>aside</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>main</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>{{</span> <span style=color:#66d9ef>end</span> <span style=color:#75715e>}}</span>
</span></span></code></pre></div><h2 id=模板示例toc-partial>模板示例：TOC Partial
<a class=anchor href=#%e6%a8%a1%e6%9d%bf%e7%a4%ba%e4%be%8btoc-partial>#</a></h2><p>​ 以下是一个<a href=https://gohugo.io/templates/partials/>部分模板</a>，它为页面级别控制目录添加了稍微更多的逻辑。它假定您在内容的前置元数据中使用<code>toc</code>字段，除非将其特别设置为<code>false</code>，否则会将TOC添加到具有大于400的<code>.WordCount</code>（请参见<a href=https://gohugo.io/variables/page/>页面变量</a>）的任何页面。此示例还演示了如何在模板中使用<a href=https://gohugo.io/templates/introduction/#conditionals>条件语句</a>：</p><p>layouts/partials/toc.html</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go-html-template data-lang=go-html-template><span style=display:flex><span><span style=color:#75715e>{{</span> <span style=color:#66d9ef>if</span> <span style=color:#66d9ef>and</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>gt</span> <span style=color:#a6e22e>.WordCount</span> <span style=color:#a6e22e>400</span> <span style=color:#f92672>)</span> <span style=color:#f92672>(</span><span style=color:#a6e22e>.Params.toc</span><span style=color:#f92672>)</span> <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>aside</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>header</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>h2</span>&gt;<span style=color:#75715e>{{</span> <span style=color:#a6e22e>.Title</span> <span style=color:#75715e>}}</span>&lt;/<span style=color:#f92672>h2</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>header</span>&gt;
</span></span><span style=display:flex><span>    <span style=color:#75715e>{{</span> <span style=color:#a6e22e>.TableOfContents</span> <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>aside</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>{{</span> <span style=color:#66d9ef>end</span> <span style=color:#75715e>}}</span>
</span></span></code></pre></div><p>​ 通过前面的示例，即使页面中有> 400个单词且<code>toc</code>未设置为<code>false</code>，如果页面中没有标题可以被<code>{{ .TableOfContents }}</code>变量提取，也不会渲染目录。</p><h2 id=使用asciidoc>使用AsciiDoc
<a class=anchor href=#%e4%bd%bf%e7%94%a8asciidoc>#</a></h2><p>​ Hugo支持使用AsciiDoc内容格式的目录。</p><p>​ 在内容文件的头部，指定AsciiDoc TOC指令，以确保生成目录。Hugo将使用生成的TOC来填充页面变量<code>.TableOfContents</code>，方式与Markdown描述的相同。请参见以下示例：</p><pre tabindex=0><code class=language-asciidoc data-lang=asciidoc>// &lt;!-- Your 前置元数据 up here --&gt;
:toc:
// Set toclevels to be at least your hugo [markup.tableOfContents.endLevel] config key
:toclevels: 4

== Introduction

One morning, when Gregor Samsa woke from troubled dreams, he found himself transformed in his bed into a horrible vermin.

== My Heading

He lay on his armour-like back, and if he lifted his head a little he could see his brown belly, slightly domed and divided by arches into stiff sections. The bedding was hardly able to cover it and seemed ready to slide off any moment.

=== My Subheading

A collection of textile samples lay spread out on the table - Samsa was a travelling salesman - and above it there hung a picture that he had recently cut out of an illustrated magazine and housed in a nice, gilded frame. It showed a lady fitted out with a fur hat and fur boa who sat upright, raising a heavy fur muff that covered the whole of her lower arm towards the viewer. Gregor then turned to look out the window at the dull weather. Drops
</code></pre><p>​ Hugo将获取此AsciiDoc并创建目录，并将其存储在页面变量<code>.TableOfContents</code>中，与Markdown描述的相同。</p><h2 id=另请参阅>另请参阅
<a class=anchor href=#%e5%8f%a6%e8%af%b7%e5%8f%82%e9%98%85>#</a></h2><ul><li><a href=https://gohugo.io/hugo-pipes/babel/>Babel</a></li><li><a href=https://gohugo.io/hugo-pipes/bundling/>Concat</a></li><li><a href=https://gohugo.io/hugo-pipes/resource-from-template/>ExecuteAsTemplate</a></li><li><a href=https://gohugo.io/hugo-pipes/fingerprint/>Fingerprint</a></li><li><a href=https://gohugo.io/hugo-pipes/resource-from-string/>FromString</a></li></ul></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#用法>用法</a></li><li><a href=#模板示例基本toc>模板示例：基本TOC</a></li><li><a href=#模板示例toc-partial>模板示例：TOC Partial</a></li><li><a href=#使用asciidoc>使用AsciiDoc</a></li><li><a href=#另请参阅>另请参阅</a></li></ul></nav></div></aside></main></body></html>