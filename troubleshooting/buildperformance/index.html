<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Build Performance # https://gohugo.io/troubleshooting/build-performance/ An overview of features used for diagnosing and improving performance issues in site builds. Template Metrics # Hugo is a very fast static site generator, but it is possible to write inefficient templates. Hugo’s template metrics feature is extremely helpful in pinpointing which templates are executed most often and how long those executions take in terms of CPU time. Metric Name"><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://t.is-local.org/hugo/troubleshooting/buildperformance/"><meta property="og:site_name" content="HUGO"><meta property="og:title" content="BuildPerformance"><meta property="og:description" content="Build Performance # https://gohugo.io/troubleshooting/build-performance/ An overview of features used for diagnosing and improving performance issues in site builds. Template Metrics # Hugo is a very fast static site generator, but it is possible to write inefficient templates. Hugo’s template metrics feature is extremely helpful in pinpointing which templates are executed most often and how long those executions take in terms of CPU time. Metric Name"><meta property="og:locale" content="zh_cn"><meta property="og:type" content="article"><meta property="article:section" content="troubleshooting"><meta property="article:published_time" content="2023-05-18T17:03:08+08:00"><meta property="article:modified_time" content="2023-05-18T17:03:08+08:00"><title>BuildPerformance | HUGO</title>
<link rel=manifest href=/hugo/manifest.json><link rel=icon href=/hugo/favicon.png><link rel=canonical href=https://t.is-local.org/hugo/troubleshooting/buildperformance/><link rel=stylesheet href=/hugo/book.min.309b7ed028807cdb68d8d61e26d609f48369c098dbf5e4d8c0dcf4cdf49feafc.css integrity="sha256-MJt+0CiAfNto2NYeJtYJ9INpwJjb9eTYwNz0zfSf6vw=" crossorigin=anonymous><script defer src=/hugo/fuse.min.js></script><script defer src=/hugo/zh-cn.search.min.a426f3a0e1e8951a39b1b352645e382bb08b14b3d53468b1f8b07b0d0928cfe6.js integrity="sha256-pCbzoOHolRo5sbNSZF44K7CLFLPVNGix+LB7DQkoz+Y=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/hugo/><span>HUGO</span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder aria-label maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><ul class=book-languages><li><input type=checkbox id=languages class=toggle>
<label for=languages class="flex justify-between"><a role=button class="flex align-center"><img src=/hugo/svg/translate.svg class=book-icon alt=Languages>
中文</a></label><ul><li><a href=https://t.is-local.org/hugo/en/>English</a></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/hugo/svg/menu.svg class=book-icon alt=Menu>
</label><strong>BuildPerformance</strong>
<label for=toc-control><img src=/hugo/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#template-metrics>Template Metrics</a></li><li><a href=#cached-partials>Cached Partials</a></li><li><a href=#另请参阅>另请参阅</a></li></ul></nav></aside></header><article class="markdown book-article"><h1 id=build-performance>Build Performance
<a class=anchor href=#build-performance>#</a></h1><p><a href=https://gohugo.io/troubleshooting/build-performance/>https://gohugo.io/troubleshooting/build-performance/</a></p><p>An overview of features used for diagnosing and improving performance issues in site builds.</p><h2 id=template-metrics>Template Metrics
<a class=anchor href=#template-metrics>#</a></h2><p>Hugo is a very fast static site generator, but it is possible to write inefficient templates. Hugo’s <em>template metrics</em> feature is extremely helpful in pinpointing which templates are executed most often and how long those executions take <strong>in terms of CPU time</strong>.</p><table><thead><tr><th style=text-align:left>Metric Name</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left>cumulative duration</td><td style=text-align:left>The cumulative time spent executing a given template.</td></tr><tr><td style=text-align:left>average duration</td><td style=text-align:left>The average time spent executing a given template.</td></tr><tr><td style=text-align:left>maximum duration</td><td style=text-align:left>The maximum time a single execution took for a given template.</td></tr><tr><td style=text-align:left>count</td><td style=text-align:left>The number of times a template was executed.</td></tr><tr><td style=text-align:left>template</td><td style=text-align:left>The template name.</td></tr></tbody></table><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span>▶ hugo --templateMetrics
</span></span><span style=display:flex><span>Started building sites ...
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Built site for language en:
</span></span><span style=display:flex><span>0 draft content
</span></span><span style=display:flex><span>0 future content
</span></span><span style=display:flex><span>0 expired content
</span></span><span style=display:flex><span>2 regular pages created
</span></span><span style=display:flex><span>22 other pages created
</span></span><span style=display:flex><span>0 non-page files copied
</span></span><span style=display:flex><span>0 paginator pages created
</span></span><span style=display:flex><span>4 tags created
</span></span><span style=display:flex><span>3 categories created
</span></span><span style=display:flex><span>total in 18 ms
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Template Metrics:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>     cumulative       average       maximum
</span></span><span style=display:flex><span>       duration      duration      duration  count  template
</span></span><span style=display:flex><span>     ----------      --------      --------  -----  --------
</span></span><span style=display:flex><span>     6.419663ms     583.605µs     994.374µs     11  _internal/_default/rss.xml
</span></span><span style=display:flex><span>     4.718511ms    1.572837ms    3.880742ms      3  indexes/category.html
</span></span><span style=display:flex><span>     4.642666ms    2.321333ms    3.282842ms      2  posts/single.html
</span></span><span style=display:flex><span>     4.364445ms     396.767µs    2.451372ms     11  partials/header.html
</span></span><span style=display:flex><span>     2.346069ms     586.517µs     903.343µs      4  indexes/tag.html
</span></span><span style=display:flex><span>     2.330919ms     211.901µs    2.281342ms     11  partials/header.includes.html
</span></span><span style=display:flex><span>     1.238976ms     103.248µs     446.084µs     12  posts/li.html
</span></span><span style=display:flex><span>       972.16µs      972.16µs      972.16µs      1  _internal/_default/sitemap.xml
</span></span><span style=display:flex><span>      953.597µs     953.597µs     953.597µs      1  index.html
</span></span><span style=display:flex><span>      822.263µs     822.263µs     822.263µs      1  indexes/post.html
</span></span><span style=display:flex><span>      567.498µs       51.59µs     112.205µs     11  partials/navbar.html
</span></span><span style=display:flex><span>       348.22µs      31.656µs      88.249µs     11  partials/meta.html
</span></span><span style=display:flex><span>      346.782µs     173.391µs     276.176µs      2  posts/summary.html
</span></span><span style=display:flex><span>      235.184µs       21.38µs     124.383µs     11  partials/footer.copyright.html
</span></span><span style=display:flex><span>      132.003µs          12µs     117.999µs     11  partials/menu.html
</span></span><span style=display:flex><span>       72.547µs       6.595µs      63.764µs     11  partials/footer.html
</span></span></code></pre></div><p><strong>A Note About Parallelism</strong></p><p>Hugo builds pages in parallel where multiple pages are generated simultaneously. Because of this parallelism, the sum of &ldquo;cumulative duration&rdquo; values is usually greater than the actual time it takes to build a site.</p><h2 id=cached-partials>Cached Partials
<a class=anchor href=#cached-partials>#</a></h2><p>Some <code>partial</code> templates such as sidebars or menus are executed many times during a site build. Depending on the content within the <code>partial</code> template and the desired output, the template may benefit from caching to reduce the number of executions. The <a href=https://gohugo.io/functions/partialcached><code>partialCached</code></a> template function provides caching capabilities for <code>partial</code> templates.</p><p>Note that you can create cached variants of each <code>partial</code> by passing additional parameters to <code>partialCached</code> beyond the initial context. See the <code>partialCached</code> documentation for more details.</p><h2 id=另请参阅>另请参阅
<a class=anchor href=#%e5%8f%a6%e8%af%b7%e5%8f%82%e9%98%85>#</a></h2><ul><li><a href=https://gohugo.io/templates/partials/>Partial Templates</a></li></ul></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#template-metrics>Template Metrics</a></li><li><a href=#cached-partials>Cached Partials</a></li><li><a href=#另请参阅>另请参阅</a></li></ul></nav></div></aside></main></body></html>