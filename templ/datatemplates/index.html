<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Data Templates - 数据模板 # https://gohugo.io/templates/data-templates/ ​ 除了Hugo内置的变量，您可以在模板或简码中指定自己的自定义数据，这些数据可以来自本地和动态源。 ​ Hugo支持从位于Hu"><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://t.is-local.org/hugo/templ/datatemplates/"><meta property="og:site_name" content="HUGO"><meta property="og:title" content="数据模板"><meta property="og:description" content="Data Templates - 数据模板 # https://gohugo.io/templates/data-templates/ ​ 除了Hugo内置的变量，您可以在模板或简码中指定自己的自定义数据，这些数据可以来自本地和动态源。 ​ Hugo支持从位于Hu"><meta property="og:locale" content="zh_cn"><meta property="og:type" content="article"><meta property="article:section" content="templ"><meta property="article:published_time" content="2023-05-18T17:03:08+08:00"><meta property="article:modified_time" content="2023-05-18T17:03:08+08:00"><title>数据模板 | HUGO</title>
<link rel=manifest href=/hugo/manifest.json><link rel=icon href=/hugo/favicon.png><link rel=canonical href=https://t.is-local.org/hugo/templ/datatemplates/><link rel=stylesheet href=/hugo/book.min.309b7ed028807cdb68d8d61e26d609f48369c098dbf5e4d8c0dcf4cdf49feafc.css integrity="sha256-MJt+0CiAfNto2NYeJtYJ9INpwJjb9eTYwNz0zfSf6vw=" crossorigin=anonymous><script defer src=/hugo/fuse.min.js></script><script defer src=/hugo/zh-cn.search.min.a426f3a0e1e8951a39b1b352645e382bb08b14b3d53468b1f8b07b0d0928cfe6.js integrity="sha256-pCbzoOHolRo5sbNSZF44K7CLFLPVNGix+LB7DQkoz+Y=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/hugo/><span>HUGO</span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder aria-label maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><ul class=book-languages><li><input type=checkbox id=languages class=toggle>
<label for=languages class="flex justify-between"><a role=button class="flex align-center"><img src=/hugo/svg/translate.svg class=book-icon alt=Languages>
中文</a></label><ul><li><a href=https://t.is-local.org/hugo/en/>English</a></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/hugo/svg/menu.svg class=book-icon alt=Menu>
</label><strong>数据模板</strong>
<label for=toc-control><img src=/hugo/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#data文件夹>data文件夹</a></li><li><a href=#主题中的数据文件>主题中的数据文件</a></li><li><a href=#示例jaco-pastorius的个人唱片>示例：Jaco Pastorius的个人唱片</a></li><li><a href=#示例从数据文件中访问命名的值>示例：从数据文件中访问命名的值</a></li><li><a href=#获取远程数据>获取远程数据</a><ul><li><a href=#添加-http-标头>添加 HTTP 标头</a></li><li><a href=#csv-文件示例>CSV 文件示例</a></li><li><a href=#缓存-url>缓存 URL</a></li><li><a href=#使用-rest-url-进行身份验证>使用 REST URL 进行身份验证</a></li></ul></li><li><a href=#加载本地文件>加载本地文件</a></li><li><a href=#数据文件的-livereload>数据文件的 LiveReload</a></li><li><a href=#数据驱动内容的示例>数据驱动内容的示例</a></li><li><a href=#数据格式规范>数据格式规范</a></li><li><a href=#另请参阅>另请参阅</a></li></ul></nav></aside></header><article class="markdown book-article"><h1 id=data-templates---数据模板>Data Templates - 数据模板
<a class=anchor href=#data-templates---%e6%95%b0%e6%8d%ae%e6%a8%a1%e6%9d%bf>#</a></h1><p><a href=https://gohugo.io/templates/data-templates/>https://gohugo.io/templates/data-templates/</a></p><p>​ 除了Hugo内置的变量，您可以在模板或简码中指定自己的自定义数据，这些数据可以来自本地和动态源。</p><p>​ Hugo支持从位于Hugo项目根目录下的<code>data</code>目录中的YAML、JSON、XML和TOML文件加载数据。</p><iframe src=https://www.youtube.com/embed/FyPgSuwIMWQ allowfullscreen title="YouTube Video" style=top:0;left:0;width:543.991px;height:305.994px;border:0></iframe><h2 id=data文件夹>data文件夹
<a class=anchor href=#data%e6%96%87%e4%bb%b6%e5%a4%b9>#</a></h2><p>​ <code>data</code> 文件夹应该存储在生成站点时 Hugo 需要使用的其他数据。</p><p>​ 数据文件不用于生成独立的页面。它们应该通过以下方式补充内容文件：</p><ul><li>当前置元数据字段过于复杂时扩展内容；或</li><li>在模板中显示一个更大的数据集（参见下面的示例）</li></ul><p>​ 在这两种情况下，最好将这些数据外包到它们（自己的）的文件中。</p><p>​ 这些文件必须是 YAML、JSON、XML 或 TOML 文件（使用 <code>.yml</code>、<code>.yaml</code>、<code>.json</code>、<code>.xml</code> 或 <code>.toml</code> 扩展名）。这些数据将作为 <code>map</code> 存储在 <code>.Site.Data</code> 变量中。</p><p>​ 要使用 <code>site.Data.filename</code> 表示法访问数据，该filename必须以下划线或 Unicode 字母开头，后跟零个或多个下划线、Unicode 字母或 Unicode 数字。例如：</p><ul><li><code>123.json</code> - 无效的</li><li><code>x123.json</code> - 有效的</li><li><code>_123.json</code> - 有效的</li></ul><p>​ 要使用 <a href=https://gohugo.io/functions/index-function/>index</a> 函数访问这些数据，则该文件名无关紧要。例如：</p><table><thead><tr><th style=text-align:left>数据文件</th><th style=text-align:left>模板代码</th></tr></thead><tbody><tr><td style=text-align:left><code>123.json</code></td><td style=text-align:left><code>{{ index .Site.Data "123" }}</code></td></tr><tr><td style=text-align:left><code>x123.json</code></td><td style=text-align:left><code>{{ index .Site.Data "x123" }}</code></td></tr><tr><td style=text-align:left><code>_123.json</code></td><td style=text-align:left><code>{{ index .Site.Data "_123" }}</code></td></tr><tr><td style=text-align:left><code>x-123.json</code></td><td style=text-align:left><code>{{ index .Site.Data "x-123" }}</code></td></tr></tbody></table><h2 id=主题中的数据文件>主题中的数据文件
<a class=anchor href=#%e4%b8%bb%e9%a2%98%e4%b8%ad%e7%9a%84%e6%95%b0%e6%8d%ae%e6%96%87%e4%bb%b6>#</a></h2><p>​ 数据文件也可以在主题中使用。</p><p>​ 但是，请注意，主题数据文件与项目目录合并，以项目目录为优先。也就是说，如果存在相同名称和相对路径的两个文件，则根项目 <code>data</code> 目录中文件中的数据将覆盖 <code>themes/&lt;THEME>/data</code> 目录中文件中的数据（对于重复的键）。</p><p>​ 因此，主题作者应该小心，不要包含用户可以轻松覆盖的数据文件，因为用户可能决定<a href=https://gohugo.io/hugo-modules/theme-components/>自定义主题</a>。对于不应被覆盖的特定于主题的数据项，最好在文件夹结构前加上命名空间，例如 <code>mytheme/data/&lt;THEME>/somekey/...</code>。要检查是否存在此类重复项，请使用 <code>-v</code> 标志运行 hugo。</p><p>​ 从数据文件创建数据模板的映射中的键将是一组点链接的 <code>path</code>、<code>filename</code> 和文件中的 <code>key</code>（如果适用）。</p><p>​ 以下是最好的说明例子：</p><h2 id=示例jaco-pastorius的个人唱片>示例：Jaco Pastorius的个人唱片
<a class=anchor href=#%e7%a4%ba%e4%be%8bjaco-pastorius%e7%9a%84%e4%b8%aa%e4%ba%ba%e5%94%b1%e7%89%87>#</a></h2><p>​ <a href=https://en.wikipedia.org/wiki/Jaco_Pastorius_discography>Jaco Pastorius</a> 是一位伟大的贝斯手，但他的个人唱片分类目录非常简短，足以作为一个示例。<a href=https://en.wikipedia.org/wiki/John_Patitucci>John Patitucci</a> 是另一位贝斯巨匠。</p><p>​ 下面的示例有点牵强，但它说明了数据文件的灵活性。这个示例使用 TOML 作为文件格式，其中包含以下两个数据文件：</p><ul><li><code>data/jazz/bass/jacopastorius.toml</code></li><li><code>data/jazz/bass/johnpatitucci.toml</code></li></ul><p>​ <code>jacopastorius.toml</code> 包含以下内容。 <code>johnpatitucci.toml</code> 包含类似的列表：</p><p>jacopastorius.</p><p>=== &ldquo;yaml&rdquo;</p><pre><code>``` yaml
discography:
- 1974 - Modern American Music … Period! The Criteria Sessions
- 1974 - Jaco
- 1976 - Jaco Pastorius
- 1981 - Word of Mouth
- 1981 - The Birthday Concert (released in 1995)
- 1982 - Twins I &amp; II (released in 1999)
- 1983 - Invitation
- 1986 - Broadway Blues (released in 1998)
- 1986 - Honestly Solo Live (released in 1990)
- 1986 - Live In Italy (released in 1991)
- 1986 - Heavy'n Jazz (released in 1992)
- 1991 - Live In New York City, Volumes 1-7.
- 1999 - Rare Collection (compilation)
- '2003 - Punk Jazz: The Jaco Pastorius Anthology (compilation)'
- 2007 - The Essential Jaco Pastorius (compilation)
```
</code></pre><p>=== &ldquo;toml&rdquo;</p><pre><code>``` toml
discography = ['1974 - Modern American Music … Period! The Criteria Sessions', '1974 - Jaco', '1976 - Jaco Pastorius', '1981 - Word of Mouth', '1981 - The Birthday Concert (released in 1995)', '1982 - Twins I &amp; II (released in 1999)', '1983 - Invitation', '1986 - Broadway Blues (released in 1998)', '1986 - Honestly Solo Live (released in 1990)', '1986 - Live In Italy (released in 1991)', &quot;1986 - Heavy'n Jazz (released in 1992)&quot;, '1991 - Live In New York City, Volumes 1-7.', '1999 - Rare Collection (compilation)', '2003 - Punk Jazz: The Jaco Pastorius Anthology (compilation)', '2007 - The Essential Jaco Pastorius (compilation)']
```
</code></pre><p>=== &ldquo;json&rdquo;</p><pre><code>``` json
{
   &quot;discography&quot;: [
      &quot;1974 - Modern American Music … Period! The Criteria Sessions&quot;,
      &quot;1974 - Jaco&quot;,
      &quot;1976 - Jaco Pastorius&quot;,
      &quot;1981 - Word of Mouth&quot;,
      &quot;1981 - The Birthday Concert (released in 1995)&quot;,
      &quot;1982 - Twins I \u0026 II (released in 1999)&quot;,
      &quot;1983 - Invitation&quot;,
      &quot;1986 - Broadway Blues (released in 1998)&quot;,
      &quot;1986 - Honestly Solo Live (released in 1990)&quot;,
      &quot;1986 - Live In Italy (released in 1991)&quot;,
      &quot;1986 - Heavy'n Jazz (released in 1992)&quot;,
      &quot;1991 - Live In New York City, Volumes 1-7.&quot;,
      &quot;1999 - Rare Collection (compilation)&quot;,
      &quot;2003 - Punk Jazz: The Jaco Pastorius Anthology (compilation)&quot;,
      &quot;2007 - The Essential Jaco Pastorius (compilation)&quot;
   ]
}
```
</code></pre><p>​ 可以通过 <code>.Site.Data.jazz.bass</code> 访问贝斯手列表，通过添加文件名而不带后缀名来访问单个贝斯手，例如 <code>.Site.Data.jazz.bass.jacopastorius</code>。</p><p>​ 现在可以在模板中呈现所有贝斯手的唱片列表：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go-html-template data-lang=go-html-template><span style=display:flex><span><span style=color:#75715e>{{</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>$.Site.Data.jazz.bass</span> <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span>   <span style=color:#75715e>{{</span> <span style=color:#a6e22e>partial</span> <span style=color:#e6db74>&#34;artist.html&#34;</span> <span style=color:#a6e22e>.</span> <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span><span style=color:#75715e>{{</span> <span style=color:#66d9ef>end</span> <span style=color:#75715e>}}</span>
</span></span></code></pre></div><p>​ 然后在 <code>partials/artist.html</code> 中：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go-html-template data-lang=go-html-template><span style=display:flex><span>&lt;<span style=color:#f92672>ul</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>{{</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>.discography</span> <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>li</span>&gt;<span style=color:#75715e>{{</span> <span style=color:#a6e22e>.</span> <span style=color:#75715e>}}</span>&lt;/<span style=color:#f92672>li</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>{{</span> <span style=color:#66d9ef>end</span> <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>ul</span>&gt;
</span></span></code></pre></div><p>​ 发现新的喜欢的贝斯手？只需在相同的目录中添加另一个 <code>.toml</code> 文件即可。</p><h2 id=示例从数据文件中访问命名的值>示例：从数据文件中访问命名的值
<a class=anchor href=#%e7%a4%ba%e4%be%8b%e4%bb%8e%e6%95%b0%e6%8d%ae%e6%96%87%e4%bb%b6%e4%b8%ad%e8%ae%bf%e9%97%ae%e5%91%bd%e5%90%8d%e7%9a%84%e5%80%bc>#</a></h2><p>​ 假设在 <code>data/</code> 下的 <code>User0123.[yml|toml|xml|json]</code> 数据文件中，您有以下数据结构：</p><p>User0123.</p><p>=== &ldquo;yaml&rdquo;</p><pre><code>``` yaml
Achievements:
- Can create a Key, Value list from Data File
- Learns Hugo
- Reads documentation
Name: User0123
Short Description: He is a **jolly good** fellow.
```
</code></pre><p>=== &ldquo;toml&rdquo;</p><pre><code>``` toml
Achievements = ['Can create a Key, Value list from Data File', 'Learns Hugo', 'Reads documentation']
Name = 'User0123'
'Short Description' = 'He is a **jolly good** fellow.'
```
</code></pre><p>=== &ldquo;json&rdquo;</p><pre><code>``` json
{
   &quot;Achievements&quot;: [
      &quot;Can create a Key, Value list from Data File&quot;,
      &quot;Learns Hugo&quot;,
      &quot;Reads documentation&quot;
   ],
   &quot;Name&quot;: &quot;User0123&quot;,
   &quot;Short Description&quot;: &quot;He is a **jolly good** fellow.&quot;
}
```
</code></pre><p>​ 您可以使用以下代码在布局中渲染 <code>Short Description</code>：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go-html-template data-lang=go-html-template><span style=display:flex><span>&lt;<span style=color:#f92672>div</span>&gt;Short Description of <span style=color:#75715e>{{</span> <span style=color:#a6e22e>.Site.Data.User0123.Name</span> <span style=color:#75715e>}}</span>: &lt;<span style=color:#f92672>p</span>&gt;<span style=color:#75715e>{{</span> <span style=color:#66d9ef>index</span> <span style=color:#a6e22e>.Site.Data.User0123</span> <span style=color:#e6db74>&#34;Short Description&#34;</span> <span style=color:#f92672>|</span> <span style=color:#a6e22e>markdownify</span> <span style=color:#75715e>}}</span>&lt;/<span style=color:#f92672>p</span>&gt;&lt;/<span style=color:#f92672>div</span>&gt;
</span></span></code></pre></div><p>​ 请注意使用 <a href=https://gohugo.io/functions/markdownify/><code>markdownify</code> 模板函数</a>。这将通过 Markdown 渲染引擎发送描述。</p><h2 id=获取远程数据>获取远程数据
<a class=anchor href=#%e8%8e%b7%e5%8f%96%e8%bf%9c%e7%a8%8b%e6%95%b0%e6%8d%ae>#</a></h2><p>​ 使用 <code>getJSON</code> 或 <code>getCSV</code> 获取远程数据：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go-html-template data-lang=go-html-template><span style=display:flex><span><span style=color:#75715e>{{</span> <span style=color:#a6e22e>$dataJ</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>getJSON</span> <span style=color:#e6db74>&#34;url&#34;</span> <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span><span style=color:#75715e>{{</span> <span style=color:#a6e22e>$dataC</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>getCSV</span> <span style=color:#e6db74>&#34;separator&#34;</span> <span style=color:#e6db74>&#34;url&#34;</span> <span style=color:#75715e>}}</span>
</span></span></code></pre></div><p>​ 如果为 URL 使用前缀或后缀，则这些函数接受<a href=https://en.wikipedia.org/wiki/Variadic_function>可变参数</a>：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go-html-template data-lang=go-html-template><span style=display:flex><span><span style=color:#75715e>{{</span> <span style=color:#a6e22e>$dataJ</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>getJSON</span> <span style=color:#e6db74>&#34;url prefix&#34;</span> <span style=color:#e6db74>&#34;arg1&#34;</span> <span style=color:#e6db74>&#34;arg2&#34;</span> <span style=color:#e6db74>&#34;arg n&#34;</span> <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span><span style=color:#75715e>{{</span> <span style=color:#a6e22e>$dataC</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>getCSV</span>  <span style=color:#e6db74>&#34;separator&#34;</span> <span style=color:#e6db74>&#34;url prefix&#34;</span> <span style=color:#e6db74>&#34;arg1&#34;</span> <span style=color:#e6db74>&#34;arg2&#34;</span> <span style=color:#e6db74>&#34;arg n&#34;</span> <span style=color:#75715e>}}</span>
</span></span></code></pre></div><p>​ <code>getCSV</code> 的分隔符（separator）必须放在第一个位置，并且只能是一个字符长。</p><p>​ 所有传递的参数将连接到最终 URL：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go-html-template data-lang=go-html-template><span style=display:flex><span><span style=color:#75715e>{{</span> <span style=color:#a6e22e>$urlPre</span> <span style=color:#f92672>:=</span> <span style=color:#e6db74>&#34;https://api.github.com&#34;</span> <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span><span style=color:#75715e>{{</span> <span style=color:#a6e22e>$gistJ</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>getJSON</span> <span style=color:#a6e22e>$urlPre</span> <span style=color:#e6db74>&#34;/users/GITHUB_USERNAME/gists&#34;</span> <span style=color:#75715e>}}</span>
</span></span></code></pre></div><p>​ 这将在内部解析为以下内容：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go-html-template data-lang=go-html-template><span style=display:flex><span><span style=color:#75715e>{{</span> <span style=color:#a6e22e>$gistJ</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>getJSON</span> <span style=color:#e6db74>&#34;https://api.github.com/users/GITHUB_USERNAME/gists&#34;</span> <span style=color:#75715e>}}</span>
</span></span></code></pre></div><h3 id=添加-http-标头>添加 HTTP 标头
<a class=anchor href=#%e6%b7%bb%e5%8a%a0-http-%e6%a0%87%e5%a4%b4>#</a></h3><p>​ <code>getJSON</code> 和 <code>getCSV</code> 都以可选的 map 作为最后一个参数，例如：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go-html-template data-lang=go-html-template><span style=display:flex><span><span style=color:#75715e>{{</span> <span style=color:#a6e22e>$data</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>getJSON</span> <span style=color:#e6db74>&#34;https://example.org/api&#34;</span> <span style=color:#f92672>(</span><span style=color:#a6e22e>dict</span> <span style=color:#e6db74>&#34;Authorization&#34;</span> <span style=color:#e6db74>&#34;Bearer abcd&#34;</span><span style=color:#f92672>)</span> <span style=color:#75715e>}}</span>
</span></span></code></pre></div><p>​ 如果您需要同一标头键的多个值，请使用切片：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go-html-template data-lang=go-html-template><span style=display:flex><span><span style=color:#75715e>{{</span> <span style=color:#a6e22e>$data</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>getJSON</span> <span style=color:#e6db74>&#34;https://example.org/api&#34;</span> <span style=color:#f92672>(</span><span style=color:#a6e22e>dict</span> <span style=color:#e6db74>&#34;X-List&#34;</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>slice</span> <span style=color:#e6db74>&#34;a&#34;</span> <span style=color:#e6db74>&#34;b&#34;</span> <span style=color:#e6db74>&#34;c&#34;</span><span style=color:#f92672>))</span> <span style=color:#75715e>}}</span>
</span></span></code></pre></div><h3 id=csv-文件示例>CSV 文件示例
<a class=anchor href=#csv-%e6%96%87%e4%bb%b6%e7%a4%ba%e4%be%8b>#</a></h3><p>​ 对于<code>getCSV</code>，一个字符长的分隔符必须放在第一个位置，然后是URL。以下是从已发布的CSV在<a href=https://gohugo.io/templates/partials/>partial模板</a>中创建HTML表格的示例：</p><p>layouts/partials/get-csv.html</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go-html-template data-lang=go-html-template><span style=display:flex><span>  &lt;<span style=color:#f92672>table</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>thead</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>tr</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>th</span>&gt;Name&lt;/<span style=color:#f92672>th</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>th</span>&gt;Position&lt;/<span style=color:#f92672>th</span>&gt;
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>th</span>&gt;Salary&lt;/<span style=color:#f92672>th</span>&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>tr</span>&gt;
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>thead</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>tbody</span>&gt;
</span></span><span style=display:flex><span>    <span style=color:#75715e>{{</span> <span style=color:#a6e22e>$url</span> <span style=color:#f92672>:=</span> <span style=color:#e6db74>&#34;https://example.com/finance/employee-salaries.csv&#34;</span> <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>{{</span> <span style=color:#a6e22e>$sep</span> <span style=color:#f92672>:=</span> <span style=color:#e6db74>&#34;,&#34;</span> <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>{{</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>$i</span><span style=color:#f92672>,</span> <span style=color:#a6e22e>$r</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>getCSV</span> <span style=color:#a6e22e>$sep</span> <span style=color:#a6e22e>$url</span> <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span>      &lt;<span style=color:#f92672>tr</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>td</span>&gt;<span style=color:#75715e>{{</span> <span style=color:#66d9ef>index</span> <span style=color:#a6e22e>$r</span> <span style=color:#a6e22e>0</span> <span style=color:#75715e>}}</span>&lt;/<span style=color:#f92672>td</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>td</span>&gt;<span style=color:#75715e>{{</span> <span style=color:#66d9ef>index</span> <span style=color:#a6e22e>$r</span> <span style=color:#a6e22e>1</span> <span style=color:#75715e>}}</span>&lt;/<span style=color:#f92672>td</span>&gt;
</span></span><span style=display:flex><span>        &lt;<span style=color:#f92672>td</span>&gt;<span style=color:#75715e>{{</span> <span style=color:#66d9ef>index</span> <span style=color:#a6e22e>$r</span> <span style=color:#a6e22e>2</span> <span style=color:#75715e>}}</span>&lt;/<span style=color:#f92672>td</span>&gt;
</span></span><span style=display:flex><span>      &lt;/<span style=color:#f92672>tr</span>&gt;
</span></span><span style=display:flex><span>    <span style=color:#75715e>{{</span> <span style=color:#66d9ef>end</span> <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span>    &lt;/<span style=color:#f92672>tbody</span>&gt;
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>table</span>&gt;
</span></span></code></pre></div><p>​ 表达式<code>{{ index $r number }}</code>必须用于输出当前行的第n列。</p><h3 id=缓存-url>缓存 URL
<a class=anchor href=#%e7%bc%93%e5%ad%98-url>#</a></h3><p>​ 每个下载的URL将被缓存到默认文件夹<code>$TMPDIR/hugo_cache/</code>中。变量<code>$TMPDIR</code>将被解析为依赖于您系统的临时目录。</p><p>​ 使用命令行标志<code>--cacheDir</code>，您可以指定系统上的任何文件夹作为缓存目录。</p><p>​ 您还可以在<a href=https://gohugo.io/getting-started/configuration/>主配置文件</a>中设置<code>cacheDir</code>。</p><p>​ 如果您不喜欢缓存，可以使用命令行标志<code>--ignoreCache</code>完全禁用缓存。</p><h3 id=使用-rest-url-进行身份验证>使用 REST URL 进行身份验证
<a class=anchor href=#%e4%bd%bf%e7%94%a8-rest-url-%e8%bf%9b%e8%a1%8c%e8%ba%ab%e4%bb%bd%e9%aa%8c%e8%af%81>#</a></h3><p>​ 目前，您只能使用可以放入URL中的那些身份验证方法。<a href=https://en.wikipedia.org/wiki/OAuth>OAuth</a>和其他身份验证方法未实现。</p><h2 id=加载本地文件>加载本地文件
<a class=anchor href=#%e5%8a%a0%e8%bd%bd%e6%9c%ac%e5%9c%b0%e6%96%87%e4%bb%b6>#</a></h2><p>​ 要使用<code>getJSON</code>和<code>getCSV</code>加载本地文件，源文件必须位于Hugo的工作目录中。文件扩展名不重要，但（文件的）内容重要。</p><p>​ 它应用了与上面在<a href=https://gohugo.io/templates/data-templates/#get-remote-data>获取远程数据</a>中相同的输出逻辑。</p><p>​ 要使用<code>getCSV</code>加载的本地CSV文件必须位于<code>data</code>目录<strong>之外</strong>。</p><h2 id=数据文件的-livereload>数据文件的 LiveReload
<a class=anchor href=#%e6%95%b0%e6%8d%ae%e6%96%87%e4%bb%b6%e7%9a%84-livereload>#</a></h2><p>​ 当URL的内容发生更改时，没有机会触发<a href=https://gohugo.io/getting-started/usage/#livereload>LiveReload</a>。但是，当<em>本地</em>文件更改时（即，<code>data/*</code>和<code>themes/&lt;THEME>/data/*</code>），将触发LiveReload。不支持符号链接。请注意，由于下载数据需要一段时间，Hugo会在数据下载完成之前停止处理Markdown文件。</p><p>​ 如果更改了任何本地文件并触发了LiveReload，则Hugo将从缓存中读取数据驱动（URL）内容。如果您禁用了缓存（例如，通过使用<code>hugo server --ignoreCache</code>运行服务器），Hugo将在每次LiveReload触发时重新下载内容。这可能会产生<em>巨大的</em>流量。您可能会很快达到API限制。</p><h2 id=数据驱动内容的示例>数据驱动内容的示例
<a class=anchor href=#%e6%95%b0%e6%8d%ae%e9%a9%b1%e5%8a%a8%e5%86%85%e5%ae%b9%e7%9a%84%e7%a4%ba%e4%be%8b>#</a></h2><ul><li>照片库采用 JSON 数据驱动：<a href=https://github.com/pcdummy/hugo-lightslider-example>https://github.com/pcdummy/hugo-lightslider-example</a></li><li>使用数据驱动内容和自定义简码，在一篇文章中介绍了 GitHub 星标仓库：<a href=https://github.com/SchumacherFM/blog-cs/blob/master/content%2Fposts%2Fgithub-starred.md>GitHub Starred Repositories</a>。</li></ul><h2 id=数据格式规范>数据格式规范
<a class=anchor href=#%e6%95%b0%e6%8d%ae%e6%a0%bc%e5%bc%8f%e8%a7%84%e8%8c%83>#</a></h2><ul><li><a href=https://github.com/toml-lang/toml>TOML 规范</a></li><li><a href=https://yaml.org/spec/>YAML 规范</a></li><li><a href=https://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf>JSON 规范</a></li><li><a href=https://tools.ietf.org/html/rfc4180>CSV 规范</a></li><li><a href=https://www.w3.org/XML/>XML 规范</a></li></ul><h2 id=另请参阅>另请参阅
<a class=anchor href=#%e5%8f%a6%e8%af%b7%e5%8f%82%e9%98%85>#</a></h2><ul><li><a href=https://gohugo.io/getting-started/configuration/>配置 Hugo</a></li><li><a href=https://gohugo.io/content-management/front-matter/>前置元数据</a></li><li><a href=https://gohugo.io/templates/rss/>RSS 模板</a></li><li><a href=https://gohugo.io/templates/sitemap-template/>Sitemap模板</a></li><li><a href=https://gohugo.io/functions/jsonify/>jsonify</a></li></ul></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#data文件夹>data文件夹</a></li><li><a href=#主题中的数据文件>主题中的数据文件</a></li><li><a href=#示例jaco-pastorius的个人唱片>示例：Jaco Pastorius的个人唱片</a></li><li><a href=#示例从数据文件中访问命名的值>示例：从数据文件中访问命名的值</a></li><li><a href=#获取远程数据>获取远程数据</a><ul><li><a href=#添加-http-标头>添加 HTTP 标头</a></li><li><a href=#csv-文件示例>CSV 文件示例</a></li><li><a href=#缓存-url>缓存 URL</a></li><li><a href=#使用-rest-url-进行身份验证>使用 REST URL 进行身份验证</a></li></ul></li><li><a href=#加载本地文件>加载本地文件</a></li><li><a href=#数据文件的-livereload>数据文件的 LiveReload</a></li><li><a href=#数据驱动内容的示例>数据驱动内容的示例</a></li><li><a href=#数据格式规范>数据格式规范</a></li><li><a href=#另请参阅>另请参阅</a></li></ul></nav></div></aside></main></body></html>