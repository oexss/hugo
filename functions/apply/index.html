<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="将以下英文翻译为中文： apply # https://gohugo.io/functions/apply/ Given a map, array, or slice, apply returns a new slice with a function applied over it. 语法 # apply COLLECTION FUNCTION [PARAM...] apply expects at least three parameters, depending on the function being applied. The first parameter is the sequence to operate on. The second parameter is the name of the function as a"><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://t.is-local.org/hugo/functions/apply/"><meta property="og:site_name" content="HUGO"><meta property="og:title" content="apply"><meta property="og:description" content="将以下英文翻译为中文： apply # https://gohugo.io/functions/apply/ Given a map, array, or slice, apply returns a new slice with a function applied over it. 语法 # apply COLLECTION FUNCTION [PARAM...] apply expects at least three parameters, depending on the function being applied. The first parameter is the sequence to operate on. The second parameter is the name of the function as a"><meta property="og:locale" content="zh_cn"><meta property="og:type" content="article"><meta property="article:section" content="functions"><meta property="article:published_time" content="2023-05-18T17:03:08+08:00"><meta property="article:modified_time" content="2023-05-18T17:03:08+08:00"><title>apply | HUGO</title>
<link rel=manifest href=/hugo/manifest.json><link rel=icon href=/hugo/favicon.png><link rel=canonical href=https://t.is-local.org/hugo/functions/apply/><link rel=stylesheet href=/hugo/book.min.309b7ed028807cdb68d8d61e26d609f48369c098dbf5e4d8c0dcf4cdf49feafc.css integrity="sha256-MJt+0CiAfNto2NYeJtYJ9INpwJjb9eTYwNz0zfSf6vw=" crossorigin=anonymous><script defer src=/hugo/fuse.min.js></script><script defer src=/hugo/zh-cn.search.min.a426f3a0e1e8951a39b1b352645e382bb08b14b3d53468b1f8b07b0d0928cfe6.js integrity="sha256-pCbzoOHolRo5sbNSZF44K7CLFLPVNGix+LB7DQkoz+Y=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/hugo/><span>HUGO</span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder aria-label maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><ul class=book-languages><li><input type=checkbox id=languages class=toggle>
<label for=languages class="flex justify-between"><a role=button class="flex align-center"><img src=/hugo/svg/translate.svg class=book-icon alt=Languages>
中文</a></label><ul><li><a href=https://t.is-local.org/hugo/en/>English</a></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/hugo/svg/menu.svg class=book-icon alt=Menu>
</label><strong>apply</strong>
<label for=toc-control><img src=/hugo/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#语法>语法</a></li></ul></nav></aside></header><article class="markdown book-article"><p>将以下英文翻译为中文：</p><h1 id=apply>apply
<a class=anchor href=#apply>#</a></h1><p><a href=https://gohugo.io/functions/apply/>https://gohugo.io/functions/apply/</a></p><p>Given a map, array, or slice, <code>apply</code> returns a new slice with a function applied over it.</p><h2 id=语法>语法
<a class=anchor href=#%e8%af%ad%e6%b3%95>#</a></h2><pre tabindex=0><code>apply COLLECTION FUNCTION [PARAM...]
</code></pre><p><code>apply</code> expects at least three parameters, depending on the function being applied.</p><ol><li>The first parameter is the sequence to operate on.</li><li>The second parameter is the name of the function as a string, which must be the name of a valid <a href=https://gohugo.io/functions/>Hugo function</a>.</li><li>After that, the parameters to the applied function are provided, with the string <code>"."</code> standing in for each element of the sequence the function is to be applied against.</li></ol><p>Here is an example of a content file with <code>names:</code> as a front matter field:</p><p>content/example.md</p><p>=== &ldquo;yaml&rdquo;</p><pre><code>``` yaml
---
names:
- Derek Perkins
- Joe Bergevin
- Tanner Linsley
title: Example
---
```
</code></pre><p>=== &ldquo;toml&rdquo;</p><pre><code>``` toml
+++
names = ['Derek Perkins', 'Joe Bergevin', 'Tanner Linsley']
title = 'Example'
+++
```
</code></pre><p>=== &ldquo;json&rdquo;</p><pre><code>``` json
{
   &quot;names&quot;: [
      &quot;Derek Perkins&quot;,
      &quot;Joe Bergevin&quot;,
      &quot;Tanner Linsley&quot;
   ],
   &quot;title&quot;: &quot;Example&quot;
}
```
</code></pre><p>You can then use <code>apply</code> as follows:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go-html-template data-lang=go-html-template><span style=display:flex><span><span style=color:#75715e>{{</span> <span style=color:#a6e22e>apply</span> <span style=color:#a6e22e>.Params.names</span> <span style=color:#e6db74>&#34;urlize&#34;</span> <span style=color:#e6db74>&#34;.&#34;</span> <span style=color:#75715e>}}</span>
</span></span></code></pre></div><p>Which will result in the following:</p><pre tabindex=0><code>&#34;derek-perkins&#34;, &#34;joe-bergevin&#34;, &#34;tanner-linsley&#34;
</code></pre><p>This is <em>roughly</em> equivalent to using the following with <a href=https://gohugo.io/functions/range/>range</a>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go-html-template data-lang=go-html-template><span style=display:flex><span><span style=color:#75715e>{{</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>.Params.names</span> <span style=color:#75715e>}}{{</span> <span style=color:#a6e22e>.</span> <span style=color:#f92672>|</span> <span style=color:#a6e22e>urlize</span> <span style=color:#75715e>}}{{</span> <span style=color:#66d9ef>end</span> <span style=color:#75715e>}}</span>
</span></span></code></pre></div><p>However, it is not possible to provide the output of a range to the <a href=https://gohugo.io/functions/delimit/><code>delimit</code> function</a>, so you need to <code>apply</code> it.</p><p>If you have <code>post-tag-list.html</code> and <code>post-tag-link.html</code> as <a href=https://gohugo.io/templates/partials/>partials</a>, you <em>could</em> use the following snippets, respectively:</p><p>layouts/partials/post-tag-list.html</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go-html-template data-lang=go-html-template><span style=display:flex><span><span style=color:#75715e>{{</span> <span style=color:#66d9ef>with</span> <span style=color:#a6e22e>.Params.tags</span> <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;tags-list&#34;</span>&gt;
</span></span><span style=display:flex><span>    Tags:
</span></span><span style=display:flex><span>    <span style=color:#75715e>{{</span> <span style=color:#a6e22e>$len</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>len</span> <span style=color:#a6e22e>.</span> <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>{{</span> <span style=color:#66d9ef>if</span> <span style=color:#66d9ef>eq</span> <span style=color:#a6e22e>$len</span> <span style=color:#a6e22e>1</span> <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>{{</span> <span style=color:#a6e22e>partial</span> <span style=color:#e6db74>&#34;post-tag-link.html&#34;</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>index</span> <span style=color:#a6e22e>.</span> <span style=color:#a6e22e>0</span><span style=color:#f92672>)</span> <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>{{</span> <span style=color:#66d9ef>else</span> <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>{{</span> <span style=color:#a6e22e>$last</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>sub</span> <span style=color:#a6e22e>$len</span> <span style=color:#a6e22e>1</span> <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>{{</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>first</span> <span style=color:#a6e22e>$last</span> <span style=color:#a6e22e>.</span> <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>{{</span> <span style=color:#a6e22e>partial</span> <span style=color:#e6db74>&#34;post-tag-link.html&#34;</span> <span style=color:#a6e22e>.</span> <span style=color:#75715e>}}</span>,
</span></span><span style=display:flex><span>      <span style=color:#75715e>{{</span> <span style=color:#66d9ef>end</span> <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e>{{</span> <span style=color:#a6e22e>partial</span> <span style=color:#e6db74>&#34;post-tag-link.html&#34;</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>index</span> <span style=color:#a6e22e>.</span> <span style=color:#a6e22e>$last</span><span style=color:#f92672>)</span> <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>{{</span> <span style=color:#66d9ef>end</span> <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>{{</span> <span style=color:#66d9ef>end</span> <span style=color:#75715e>}}</span>
</span></span></code></pre></div><p>layouts/partials/post-tag-link.html</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go-html-template data-lang=go-html-template><span style=display:flex><span>&lt;<span style=color:#f92672>a</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;post-tag post-tag-</span><span style=color:#75715e>{{</span> <span style=color:#a6e22e>.</span> <span style=color:#f92672>|</span> <span style=color:#a6e22e>urlize</span> <span style=color:#75715e>}}</span><span style=color:#e6db74>&#34;</span> <span style=color:#a6e22e>href</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/tags/</span><span style=color:#75715e>{{</span> <span style=color:#a6e22e>.</span> <span style=color:#f92672>|</span> <span style=color:#a6e22e>urlize</span> <span style=color:#75715e>}}</span><span style=color:#e6db74>&#34;</span>&gt;<span style=color:#75715e>{{</span> <span style=color:#a6e22e>.</span> <span style=color:#75715e>}}</span>&lt;/<span style=color:#f92672>a</span>&gt;
</span></span></code></pre></div><p>This works, but the complexity of <code>post-tag-list.html</code> is fairly high. The Hugo template needs to perform special behavior for the case where there’s only one tag, and it has to treat the last tag as special. Additionally, the tag list will be rendered something like <code>Tags: tag1 , tag2 , tag3</code> because of the way that the HTML is generated and then interpreted by a browser.</p><p>This first version of <code>layouts/partials/post-tag-list.html</code> separates all of the operations for ease of reading. The combined and DRYer version is shown next:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go-html-template data-lang=go-html-template><span style=display:flex><span><span style=color:#75715e>{{</span> <span style=color:#66d9ef>with</span> <span style=color:#a6e22e>.Params.tags</span> <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;tags-list&#34;</span>&gt;
</span></span><span style=display:flex><span>    Tags:
</span></span><span style=display:flex><span>    <span style=color:#75715e>{{</span> <span style=color:#a6e22e>$sort</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>sort</span> <span style=color:#a6e22e>.</span> <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>{{</span> <span style=color:#a6e22e>$links</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>apply</span> <span style=color:#a6e22e>$sort</span> <span style=color:#e6db74>&#34;partial&#34;</span> <span style=color:#e6db74>&#34;post-tag-link.html&#34;</span> <span style=color:#e6db74>&#34;.&#34;</span> <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>{{</span> <span style=color:#a6e22e>$clean</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>apply</span> <span style=color:#a6e22e>$links</span> <span style=color:#e6db74>&#34;chomp&#34;</span> <span style=color:#e6db74>&#34;.&#34;</span> <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>{{</span> <span style=color:#a6e22e>delimit</span> <span style=color:#a6e22e>$clean</span> <span style=color:#e6db74>&#34;, &#34;</span> <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>{{</span> <span style=color:#66d9ef>end</span> <span style=color:#75715e>}}</span>
</span></span></code></pre></div><p>Now in the completed version, you can sort the tags, convert the tags to links with <code>layouts/partials/post-tag-link.html</code>, <a href=https://gohugo.io/functions/chomp/>chomp</a> off stray newlines, and join the tags together in a delimited list for presentation. Here is an even DRYer version of the preceding example:</p><p>layouts/partials/post-tag-list.html</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go-html-template data-lang=go-html-template><span style=display:flex><span><span style=color:#75715e>{{</span> <span style=color:#66d9ef>with</span> <span style=color:#a6e22e>.Params.tags</span> <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>div</span> <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;tags-list&#34;</span>&gt;
</span></span><span style=display:flex><span>    Tags:
</span></span><span style=display:flex><span>    <span style=color:#75715e>{{</span> <span style=color:#a6e22e>delimit</span> <span style=color:#f92672>(</span><span style=color:#a6e22e>apply</span> <span style=color:#f92672>(</span><span style=color:#a6e22e>apply</span> <span style=color:#f92672>(</span><span style=color:#a6e22e>sort</span> <span style=color:#a6e22e>.</span><span style=color:#f92672>)</span> <span style=color:#e6db74>&#34;partial&#34;</span> <span style=color:#e6db74>&#34;post-tag-link.html&#34;</span> <span style=color:#e6db74>&#34;.&#34;</span><span style=color:#f92672>)</span> <span style=color:#e6db74>&#34;chomp&#34;</span> <span style=color:#e6db74>&#34;.&#34;</span><span style=color:#f92672>)</span> <span style=color:#e6db74>&#34;, &#34;</span> <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span>  &lt;/<span style=color:#f92672>div</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>{{</span> <span style=color:#66d9ef>end</span> <span style=color:#75715e>}}</span>
</span></span></code></pre></div><p><code>apply</code> does not work when receiving the sequence as an argument through a pipeline.</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#语法>语法</a></li></ul></nav></div></aside></main></body></html>