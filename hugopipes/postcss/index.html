<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="PostCSS # https://gohugo.io/hugo-pipes/postcss/ ​ 使用任何可用的插件，使用PostCSS处理CSS文件。 语法 # resources.PostCSS RESOURCE [OPTIONS] postCSS RESOURCE [OPTIONS] 设置 # ​ 按照以下步骤使用任何可用的PostCSS插件来转换C"><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://t.is-local.org/hugo/hugopipes/postcss/"><meta property="og:site_name" content="HUGO"><meta property="og:title" content="PostCSS"><meta property="og:description" content="PostCSS # https://gohugo.io/hugo-pipes/postcss/ ​ 使用任何可用的插件，使用PostCSS处理CSS文件。 语法 # resources.PostCSS RESOURCE [OPTIONS] postCSS RESOURCE [OPTIONS] 设置 # ​ 按照以下步骤使用任何可用的PostCSS插件来转换C"><meta property="og:locale" content="zh_cn"><meta property="og:type" content="article"><meta property="article:section" content="hugopipes"><meta property="article:published_time" content="2023-05-18T17:03:08+08:00"><meta property="article:modified_time" content="2023-05-18T17:03:08+08:00"><title>PostCSS | HUGO</title>
<link rel=manifest href=/hugo/manifest.json><link rel=icon href=/hugo/favicon.png><link rel=canonical href=https://t.is-local.org/hugo/hugopipes/postcss/><link rel=stylesheet href=/hugo/book.min.309b7ed028807cdb68d8d61e26d609f48369c098dbf5e4d8c0dcf4cdf49feafc.css integrity="sha256-MJt+0CiAfNto2NYeJtYJ9INpwJjb9eTYwNz0zfSf6vw=" crossorigin=anonymous><script defer src=/hugo/fuse.min.js></script><script defer src=/hugo/zh-cn.search.min.a426f3a0e1e8951a39b1b352645e382bb08b14b3d53468b1f8b07b0d0928cfe6.js integrity="sha256-pCbzoOHolRo5sbNSZF44K7CLFLPVNGix+LB7DQkoz+Y=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/hugo/><span>HUGO</span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder aria-label maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><ul class=book-languages><li><input type=checkbox id=languages class=toggle>
<label for=languages class="flex justify-between"><a role=button class="flex align-center"><img src=/hugo/svg/translate.svg class=book-icon alt=Languages>
中文</a></label><ul><li><a href=https://t.is-local.org/hugo/en/>English</a></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/hugo/svg/menu.svg class=book-icon alt=Menu>
</label><strong>PostCSS</strong>
<label for=toc-control><img src=/hugo/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#语法>语法</a></li><li><a href=#设置>设置</a></li><li><a href=#选项>选项</a></li><li><a href=#无配置文件>无配置文件</a></li><li><a href=#检查-hugo-环境>检查 Hugo 环境</a></li><li><a href=#另请参阅>另请参阅</a></li></ul></nav></aside></header><article class="markdown book-article"><h1 id=postcss>PostCSS
<a class=anchor href=#postcss>#</a></h1><p><a href=https://gohugo.io/hugo-pipes/postcss/>https://gohugo.io/hugo-pipes/postcss/</a></p><p>​ 使用任何可用的插件，使用PostCSS处理CSS文件。</p><h2 id=语法>语法
<a class=anchor href=#%e8%af%ad%e6%b3%95>#</a></h2><pre tabindex=0><code>resources.PostCSS RESOURCE [OPTIONS]
postCSS RESOURCE [OPTIONS]
</code></pre><h2 id=设置>设置
<a class=anchor href=#%e8%ae%be%e7%bd%ae>#</a></h2><p>​ 按照以下步骤使用任何<a href=https://www.postcss.parts/>可用的PostCSS插件</a>来转换CSS。</p><ul><li><p>Step 1</p><p>安装 <a href=https://nodejs.org/en/download>Node.js</a>.</p></li><li><p>Step 2</p><p>在项目的根目录中安装所需的Node.js包。例如，添加vendor 前缀到CSS规则：</p></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>npm install postcss postcss-cli autoprefixer
</span></span></code></pre></div><ul><li><p>Step 3</p><p>在项目的根目录中创建PostCSS配置文件。您必须将此文件命名为 <code>postcss.config.js</code> 或其他<a href=https://github.com/postcss/postcss-load-config#usage>supported file names</a>之一。例如：</p></li></ul><p>postcss.config.js</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>plugins</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;autoprefixer&#39;</span>)
</span></span><span style=display:flex><span>  ]
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><p>​ 如果您是Windows用户，且项目路径包含空格，则必须将PostCSS配置放置在package.json文件中。参见<a href=https://github.com/postcss/postcss-load-config#packagejson>此示例</a>和问题<a href=https://github.com/gohugoio/hugo/issues/7333>#7333</a>。</p><ul><li><p>Step 4</p><p>将CSS文件放置在 <code>assets</code> 目录中。</p></li><li><p>Step 5</p><p>将CSS文件作为资源捕获，并通过 <code>resources.PostCSS</code> （别名 <code>postCSS</code> ）进行管道处理：</p></li></ul><p>layouts/partials/css.html</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go-html-template data-lang=go-html-template><span style=display:flex><span><span style=color:#75715e>{{</span> <span style=color:#66d9ef>with</span> <span style=color:#a6e22e>resources</span><span style=color:#a6e22e>.Get</span> <span style=color:#e6db74>&#34;css/main.css&#34;</span> <span style=color:#f92672>|</span> <span style=color:#a6e22e>postCSS</span> <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>link</span> <span style=color:#a6e22e>rel</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;stylesheet&#34;</span> <span style=color:#a6e22e>href</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span><span style=color:#75715e>{{</span> <span style=color:#a6e22e>.RelPermalink</span> <span style=color:#75715e>}}</span><span style=color:#e6db74>&#34;</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>{{</span> <span style=color:#66d9ef>end</span> <span style=color:#75715e>}}</span>
</span></span></code></pre></div><p>​ 如果在 <code>assets</code> 目录中使用Sass文件：</p><p>layouts/partials/css.html</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go-html-template data-lang=go-html-template><span style=display:flex><span><span style=color:#75715e>{{</span> <span style=color:#66d9ef>with</span> <span style=color:#a6e22e>resources</span><span style=color:#a6e22e>.Get</span> <span style=color:#e6db74>&#34;sass/main.scss&#34;</span> <span style=color:#f92672>|</span> <span style=color:#a6e22e>toCSS</span> <span style=color:#f92672>|</span> <span style=color:#a6e22e>postCSS</span> <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>link</span> <span style=color:#a6e22e>rel</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;stylesheet&#34;</span> <span style=color:#a6e22e>href</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span><span style=color:#75715e>{{</span> <span style=color:#a6e22e>.RelPermalink</span> <span style=color:#75715e>}}</span><span style=color:#e6db74>&#34;</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>{{</span> <span style=color:#66d9ef>end</span> <span style=color:#75715e>}}</span>
</span></span></code></pre></div><h2 id=选项>选项
<a class=anchor href=#%e9%80%89%e9%a1%b9>#</a></h2><pre><code>`resources.PostCSS`  方法接受一个可选的选项映射。  
</code></pre><ul><li><p>config</p><p>( <code>string</code> ) 包含PostCSS配置文件的目录。默认为项目目录的根目录。</p></li><li><p>noMap</p><p>( <code>bool</code> ) 默认为 <code>false</code> 。如果为 <code>true</code> ，则禁用内联源地图（sourcemaps）。</p></li><li><p>inlineImports</p><p>( <code>bool</code> ) 默认为 <code>false</code> 。启用@import语句的内联。它会递归执行，但只会导入一次文件。URL导入（例如 <code>@import url('https://fonts.googleapis.com/css?family=Open+Sans&amp;display=swap');</code> ）和带媒体查询的导入将被忽略。请注意，此导入例程不关心CSS规范，因此您可以在文件中的任何地方使用@import。Hugo将查找相对于模块挂载的导入并遵守主题覆盖。</p></li><li><p>skipInlineImportsNotFound <a href=https://github.com/gohugoio/hugo/releases/tag/v0.99.0>New in v0.99.0</a></p><p>( <code>bool</code> ) 默认为 <code>false</code> 。在Hugo 0.99.0之前，当启用 <code>inlineImports</code> 并且我们无法解析导入时，我们会将其记录为警告。现在我们将构建失败。如果您的CSS中有常规CSS导入要保留，则可以使用带URL的导入或媒体查询（Hugo不会尝试解决这些导入），或将 <code>skipInlineImportsNotFound</code> 设置为true。</p></li></ul><p>layouts/partials/css.html</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go-html-template data-lang=go-html-template><span style=display:flex><span><span style=color:#75715e>{{</span> <span style=color:#a6e22e>$opts</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>dict</span> <span style=color:#e6db74>&#34;config&#34;</span> <span style=color:#e6db74>&#34;config-directory&#34;</span> <span style=color:#e6db74>&#34;noMap&#34;</span> <span style=color:#66d9ef>true</span> <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span><span style=color:#75715e>{{</span> <span style=color:#66d9ef>with</span> <span style=color:#a6e22e>resources</span><span style=color:#a6e22e>.Get</span> <span style=color:#e6db74>&#34;css/main.css&#34;</span> <span style=color:#f92672>|</span> <span style=color:#a6e22e>postCSS</span> <span style=color:#a6e22e>$opts</span> <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>link</span> <span style=color:#a6e22e>rel</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;stylesheet&#34;</span> <span style=color:#a6e22e>href</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span><span style=color:#75715e>{{</span> <span style=color:#a6e22e>.RelPermalink</span> <span style=color:#75715e>}}</span><span style=color:#e6db74>&#34;</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>{{</span> <span style=color:#66d9ef>end</span> <span style=color:#75715e>}}</span>
</span></span></code></pre></div><h2 id=无配置文件>无配置文件
<a class=anchor href=#%e6%97%a0%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6>#</a></h2><p>​ 为了避免使用PostCSS配置文件，可以使用选项映射指定最小的配置。</p><ul><li><p>use</p><p>(<code>string</code>) 用于指定要使用的 PostCSS 插件的以空格分隔的列表。</p></li><li><p>parser</p><p>(<code>string</code>) 自定义 PostCSS 解析器。</p></li><li><p>stringifier</p><p>(<code>string</code>) 自定义 PostCSS 字符串化器。</p></li><li><p>syntax</p><p>(<code>string</code>) 自定义 PostCSS 语法。</p></li></ul><p>layouts/partials/css.html</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go-html-template data-lang=go-html-template><span style=display:flex><span><span style=color:#75715e>{{</span> <span style=color:#a6e22e>$opts</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>dict</span> <span style=color:#e6db74>&#34;use&#34;</span> <span style=color:#e6db74>&#34;autoprefixer postcss-color-alpha&#34;</span> <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span><span style=color:#75715e>{{</span> <span style=color:#66d9ef>with</span> <span style=color:#a6e22e>resources</span><span style=color:#a6e22e>.Get</span> <span style=color:#e6db74>&#34;css/main.css&#34;</span> <span style=color:#f92672>|</span> <span style=color:#a6e22e>postCSS</span> <span style=color:#a6e22e>$opts</span> <span style=color:#75715e>}}</span>
</span></span><span style=display:flex><span>  &lt;<span style=color:#f92672>link</span> <span style=color:#a6e22e>rel</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;stylesheet&#34;</span> <span style=color:#a6e22e>href</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span><span style=color:#75715e>{{</span> <span style=color:#a6e22e>.RelPermalink</span> <span style=color:#75715e>}}</span><span style=color:#e6db74>&#34;</span>&gt;
</span></span><span style=display:flex><span><span style=color:#75715e>{{</span> <span style=color:#66d9ef>end</span> <span style=color:#75715e>}}</span>
</span></span></code></pre></div><h2 id=检查-hugo-环境>检查 Hugo 环境
<a class=anchor href=#%e6%a3%80%e6%9f%a5-hugo-%e7%8e%af%e5%a2%83>#</a></h2><p>​ 当前的 Hugo 环境名称（通过 <code>--environment</code> 在配置或操作系统环境中设置）在 Node 上下文中可用，这使得可以使用如下结构：</p><p>postcss.config.js</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>plugins</span><span style=color:#f92672>:</span> [
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;autoprefixer&#39;</span>),
</span></span><span style=display:flex><span>    ...<span style=color:#a6e22e>process</span>.<span style=color:#a6e22e>env</span>.<span style=color:#a6e22e>HUGO_ENVIRONMENT</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;production&#39;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>?</span> [<span style=color:#a6e22e>purgecss</span>]
</span></span><span style=display:flex><span>      <span style=color:#f92672>:</span> []
</span></span><span style=display:flex><span>  ]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=另请参阅>另请参阅
<a class=anchor href=#%e5%8f%a6%e8%af%b7%e5%8f%82%e9%98%85>#</a></h2><ul><li><a href=https://gohugo.io/hugo-pipes/babel/>Babel</a></li><li><a href=https://gohugo.io/hosting-and-deployment/hosting-on-21yunbox/>Host on 21YunBox</a></li><li><a href=https://gohugo.io/hugo-pipes/transform-to-css/>ToCSS</a></li><li><a href=https://gohugo.io/functions/highlight/>highlight</a></li><li><a href=https://gohugo.io/commands/hugo/>hugo</a></li></ul></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#语法>语法</a></li><li><a href=#设置>设置</a></li><li><a href=#选项>选项</a></li><li><a href=#无配置文件>无配置文件</a></li><li><a href=#检查-hugo-环境>检查 Hugo 环境</a></li><li><a href=#另请参阅>另请参阅</a></li></ul></nav></div></aside></main></body></html>